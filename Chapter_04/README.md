# Chapter 04. Variable

- **변수**: 값을 저장하는 메모리 상의 공간
- 값에 **접근해 값을 변경**하는 데에 사용함
- **이름, 값, 타입, 주소 속성**을 가짐
- 변수 간 값의 전달은 항상 **복사**로 일어남

- 변수를 사용하면 `메모리 공간에 이름을 부여`하여 쉽고 효과적으로 메모리 사용 가능함

---

## 04-I. 변수란?

- `변수Variable`: 값을 저장하는 메모리 공간을 가리키는 이름

- `프로그램`: 메모리에 있는 데이터를 언제 어떻게 변경할지 나타낸 문서
    - 프로그램의 핵심: 메모리에 있는 데이터 조작하는 것
    - 변수 이용 → 쉽고 효율적으로 메모리에 있는 데이터 조작 가능

---

## 04-II. 변수의 선언

- 변수를 사용하려면 먼저 **변수를 선언**해야 함.
    - 변수 선언: 메모리를 할당하는 과정

```go
var k int = 10
```

- 변수 선언
    - 1. `var`: **변수 선언 알리는 키워드**
    - 2. `변수 이름`
    - 3. `타입`
    - 4. 대입 연산자 = 오른쪽에 초깃값 적음

---

## 04-III. 변수에 대해 더 알아보기

### 04-III-a. 변수의 4가지 속성

- `이름`: 이름 → 값이 저장된 메모리 공간에 손쉽게 접근 가능
- `값`: 변수가 가리키는 메모리 공간에 저장된 값
- `주소`: 변수가 저장된 메모리 공간의 **시작 주소**
- `타입`: 변숫값의 형태.
    - 자료형, 데이터 타입이라고도 함

변수 k를 선언 → 컴퓨터는 메모리에 int 타입 크기에 해당하는 공간 할당 → 그 공간이 위치한 메모리 시작 주소를 k로 지칭 → 메모리 공간에 10이라는 값을 복사

### 04-III-b. 변수는 이름을 가지고 있음

변수 이름을 `변수명`이라고 함.

- Go언어에서 변수명을 지을 때 따라야 하는 규칙
    - `문자`, `_`, `숫자` 사용해 지을 수 있음
        - **첫 글자는 반드시 문자나 _로 시작해야 함**
    - `_`를 제외한 특수 문자(space 포함)을 포함 X

- 변수명 지을 때 따르라 권장 사항
    - **영문자**를 제외한 다른 언어의 문자는 사용 X
    - 변수명에 여러 단어가 이어지면 **두 번째 단어부터 대문자**로 시작
    - 변수명은 **최대한 짧게** 함
        - 잠시 사용되는 local variable은 한 글자를 권장
    - 밑줄 _은 일반적으로 사용하지 않음

변수 이름은 컴퓨터에게 무의미함. 코드가 기계어로 변환될 때 변수명 모두 사라짐, 메모리 주솟값으로 대체됨.

### 04-III-c. 변수는 타입을 가지고 있음

- 타입이 중요한 이유
    - `공간 크기`를 나타냄
        - 크기를 알아야 해당 메모리 주소에서 얼만큼 읽을지 결정 가능
    - 타입을 알아야 컴퓨터가 `데이터를 해석` 가능

#### 숫자 타입

- 부호 **없는** 정수 숫자: `unit`
- 부호 **있는** 정수 숫자: `int`
- **실수**: `float`
- 뒤에 붙은 숫자는 **비트 단위**를 나타냄

|이름|설명|
|---|---|
|unit8|1바이트 부호 없는 정수|
|unit16|2바이트 부호 없는 정수|
|unit32|4바이트 부호 없는 정수|
|int8|1바이트 부호 있는 정수|
|int16|2바이트 부호 있는 정수|
|int32|4바이트 부호 있는 정수|
|int64|8바이트 부호 있는 정수|
|float32|4바이트 실수|
|float64|8바이트 실수|
|complex64|8바이트 복소수(진수, 가수)|
|complex128|16바이트 복소수(진수, 가수)|
|byte|unit8의 별칭. 1바이트 데이터를 나타낼 때 사용함.|
|rune|unit32의 별칭. UTF-8로 문자 하나를 나타낼 때 사용.|
|int|32비트 컴퓨터에서는 int32, 64비트 컴퓨터에서는 int64와 같음|
|unit|32비트 컴퓨터에서는 unit32, 64비트 컴퓨터에서는 unit64|

- 타입 크기가 클수록 표현할 수 있는 **범위가 넓지만** 그만큼 **메모리를 더 차지**.
  - 메모리 절약해야 하는 경우: 값 범위에 딱 맞는 작은 크기의 타입을 사용해야 함.
  

#### 그 외 타입

- `boolean`: T/F 두 가지만 가지는 타입
  - bool로 선언 후 참은 true, 거짓은 false
  

- `문자열`: 문자열 타입의 키워드는 string
  

- `array`: 같은 타입의 요소들로 이루어진 연속된 메모리 공간을 나타내는 자료구조


- `슬라이스`: Go 언어에서 제공하는 **가변 길이 배열**
  - 배열: 고정 길이, 한 번 길이가 정해지면 늘리거나 줄일 수 없음
  - 반면, 슬라이스는 길이를 늘리거나 줄일 수 있음
  

- `구조체`: 필드(변수)의 집합 자료ㅔ구조
  - 상관관계가 **있는** 데이터를 묶어놓을 때 사용
  - ex) 회원 구조체: 회원ID, 회원명, 주소 등의 필드로 구성 가능
  

- `포인터`: **메모리 주소**를 값으로 갖는 타입
  - 포인터 이용 → 같은 메모리 공간을 가리키는 여러 변수를 제작 가능
  

- `함수 타입`: 함수를 가리키는 타입
  - **함수 포인터**
  - 사용할 함수를 **동적**으로 바꿀 때 유용
  

- `인터페이스`: **메서드 정의의 집합**


- `맵`: 키**key**와 값**value**을 갖는 데이터를 저장해둔 자류구조
  - 키를 사용해 데이터를 찾는 데에 특화된 자료구조
  

- `채널`**channel**: **멀티스레드 환경**에 특화된 큐 형태 자료구조

---

## 04-IV. 변수 선언의 다른 형태

### 타입별 기본값

변수를 선언할 때 초깃값 생략 → 기본값 자동 대입

|타입|기본값|
|---|---|
|모든 정수 타입|0|
|모든 실수 타입|0.0|
|불리언|false|
|문자열|"" (빈 문자열)|
|그외|nil (정의되지 않은 메모리 주소를 나타내는 Go 키워드)|

### 숫자값 기본 타입

타입 생략 시 **우변의 타입**으로 좌변(변수)의 타입이 지정됨. 

만약 우변의 숫자이면 기본 타입으로 결정됨.

정수 int, 실수는 float64가 기본 타입

### 선언 대입문 `:=`

**선언과 대입을 한꺼번에** 하는 구문.

var 키워드와 타입을 생략하여 변수 선언 가능

```go
var b = 3.1415
c := 365
s := "hello world"
```

---

## 04-V. 타입 변환

프로그래밍 언어를 구분할 때 **타입 검사**를 하는가/안 하는가에 따라 ` 강 타입 언어`, `약 타입 언어`로 나눔.

Go 언어는 강 타입 언어 중에서도 **가장 강하게 타입 검사를 하는** `최강 타입 언어`

```go
a := 3
var b float64 = 3.5

var c int = b // 에러 발생. float64 변수를 int에 대입 불가함
d := a * b // 에러 발생. 다른 타입인 int 변수와 float 연산 불가

var e int64 = 7 
f := a * e // a와 e는 같은 정수값이지만, 타입이 달라서 연산 불가(int, int64)

var g int = b * 3 // 에러 발생. 실수가 정수로 자동으로 바뀌지 않음.
```

- 연산이나 대입에서 타입이 다르면 에러 발생


- 같은 값이라도 타입이 다르면 연산이 안 됨.
  - `type conversion`: 타입 **변환해서** 연산을 해 줘야 함.
  - 원하는 타입명을 적고, `( )`로 변환시키고 싶은 변수 묶어 줌


- 타입 변환 시 유의점
  - 1. 실수 타입 → 정수 타입 시 타입 변환: 소숫점 이하 숫자 없어짐
  - 2. 큰 범위를 갖는 타입 → 작은 범위 갖는 타입 변환 시 값 달라질 수 있음
    - `ex4.5.go`: 00001101 10000000 → 10000000

---

## 04-VI. 변수의 범위

변수는 **자신이 속한 중괄호 {} 범위를 벗어나면 사라짐**. 

---

## 04-VII. 숫자 표현

### 04-VII-a. 정수 표현

- **부호**를 표현해야 함 
  - 첫 번째 비트를 부호 비트로 정해서 1이면 **음수**를, 0이면 **양수**를 나타냄
    - 양수 15 표현: 0 00000000001111
    - 음수 15 표현: 1 11111111110001
      - **보수** 표현.
        - 2의 보수를 만드는 방법은, 모든 비트의 0을 1로, 1을 0으로 바꾸고 1을 더하기

### 04-VII-b. 실수의 표현

- 소수점이 있는 실수는 1과 2 사이에도 무수히 많은 숫자가 있음 → 2진수 변환 사용 불가
  - Go 언어는 `IEEE-754` 표준을 따라 실수 표현함
  - 소수부와 지수부 나누어 표현


- 4byte 실수에서는 제일 왼쪽 1비트가 `부호 비트`
  - 1이면 음수, 0이면 양수
  - 8비트는 지수부, 23비트는 소수부 나타냄


그래도 모든 실수를 표현할 수는 없고, 한계가 있다. Go언어에서는 실숫값을 표현할 때 정확한 값이 아닌, **타입이 허용하는 범위에서 가장 가까운 근삿값**으로 표현하게 된다.

회계, 금융처럼 정확한 수치 연산이 필요한 프로그래밍에서는 실수 타입 사용에 각별히 주의해야 함.

---

**핵심 요약**

- `변수`: 값 저장하는 메모리 공간
  - 변수로 메모리 접근 → 값 조정 가능

- `선언`해야 변수를 이용 가능
  - 변수 선언: 메모리 할당을 수행함

- `변수`의 4가지 속성: 이름, 값, 타입, 주소

- 변수 선언 방법은 다양함. 편의롤 고려, 초깃값을 생략하거나 타입을 생략하는 등의 다양한 선언 방법을 제공함.

- `타입 변환`: 한 타입의 값을 변환 가능한 다른 타입으로 변환시키는 것.
  - Go 언어는 **자동 변환 지원 X**: 연산이나 대입에서 타입 변환을 해 주어야 함.

- 숫자 타입: 크기에 따라 표현할 수 있는 값의 범윌가 다름.
  - 특히 `실수 타입`은 유효 자릿수 정해져 있음, 유의할 것.

---

**연습 문제**


1. 
> a int
>
> b float**64**
>
> c string
>
> d int32
>
> e float32


2.
> a는 int32 형이므로 000 ... 0001 0110 1000 임
>
> 그런데 b는 int8 형이므로 8 byte의 int 값만 가지고, 
>
> 앞의 1을 제외한 0110 1000 만 가짐
>
> 이는 십진수로 변환했을 때 8+32+64 = 104
>
> 같은 실수형이더라도, 비트가 달라서 값이 달라짐.


3. 
> f1은 식 계산 후에 32byte로의 변환이 이루어졌고,
>
> f2는 123.546789가 이미 float32 형으로 선언되어 32byte로의 변환이 이루어진 후 곱셈이 되었다. 
>
> 그러니까 결론적으로 f1은 자릿수 탈락이 1번 일어났고, f2는 123.546789 불러올 때 1번, 할당 때 1번 해서 총 2번 일어났기 때문에 값이 달라졌다.